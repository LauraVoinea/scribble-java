module Calculator;

global protocol Calc(role A, role C, role S){
    element_1() from C to S;
    element_2() from C to S;

    mixed{
         choice at C {
               sum() from C to S;
               diff() from S to C;
               diff() from C to A;
           } or {
               diff() from C to S;
               diff() from S to C;
               diff() from C to A;
           }
       } () or C -> S() {
           timeout() from S to C;
           cancel() from C to A;
    }
}