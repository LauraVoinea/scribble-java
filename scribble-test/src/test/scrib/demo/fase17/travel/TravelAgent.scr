//$ bin/scribblec.sh scribble-test/src/test/scrib/demo/fase17/travel/TravelAgent.scr -ip scribble-test/src/test/scrib/ -d scribble-test/src/test/scrib -api Travel C -V
//$ javadoc -cp scribble-runtime/target/classes/';'scribble-core/target/classes';'scribble-test/src/test/scrib/ -subpackages demo.fase17.travel.TravelAgent.Travel -d test/doc/fase17/travel


module demo.fase17.travel.TravelAgent;

type <java> "java.lang.Integer" from "rt.jar" as Int;
type <java> "java.lang.String" from "rt.jar" as String;


/*






explicit global protocol Travel(role C, role A, role S) {
	connect C to A;
	do Nego(C, A, S);
}

aux global protocol Nego(role C, role A, role S) {
	choice at C {
		Item(String) from C to A;
		Quote(Int) from A to C;
		do Nego(C, A, S);
	} or {
		choice at C {
			connect C to S;
			Pay(String) from C to S;
			Confirm(Int) from S to C;
			Accpt(Int) from C to A;
		} or {
			Reject() from C to A;
		}
	}
}









/*/






global protocol Travel(role C, role A, role S) {
	choice at C {
		Item(String) from C to A;
		Quote(Int) from A to C;
		do Travel(C, A, S);
	} or {
		choice at C {
			Pay(String) from C to S;
			Confirm(Int) from S to C;
			Accpt(Int) from C to A;
		} or {
			Reject() from C to A;
		}
	}
}







//*/
